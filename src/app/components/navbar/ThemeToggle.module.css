.toggle {
  --toggle-border: rgba(148, 163, 184, 0.55);
  --toggle-border-dark: rgba(99, 102, 241, 0.6);
  --toggle-bg-light: linear-gradient(135deg, rgba(255, 255, 255, 0.88), rgba(226, 232, 240, 0.85));
  --toggle-bg-dark: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.92));
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 3.35rem;
  height: 1.9rem;
  border-radius: 999px;
  border: 1px solid var(--toggle-border);
  background: var(--toggle-bg-light);
  padding: 0;
  cursor: pointer;
  transition: background 0.4s ease, border-color 0.4s ease;
  overflow: hidden;
}

.toggle[data-mode="dark"] {
  border-color: var(--toggle-border-dark);
  background: var(--toggle-bg-dark);
}

.toggle:focus-visible {
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.25), 0 0 0 4px rgba(99, 102, 241, 0.15);
  outline: none;
}

.sun,
.moon {
  position: absolute;
  width: 0.9rem;
  height: 0.9rem;
  border-radius: 999px;
  transition: transform 0.45s ease, opacity 0.45s ease;
}

.sun {
  left: 0.5rem;
  background: radial-gradient(circle at 35% 35%, #fef3c7 0%, #fef08a 40%, #facc15 75%, #f59e0b 100%);
  box-shadow: 0 0 12px rgba(245, 158, 11, 0.55), 0 0 0 6px rgba(253, 230, 138, 0.15);
}

.sun::before,
.sun::after {
  content: "";
  position: absolute;
  inset: -0.25rem;
  border-radius: 999px;
  border: 1px solid rgba(250, 204, 21, 0.25);
  opacity: 0.9;
}

.moon {
  right: 0.5rem;
  background: radial-gradient(circle at 30% 30%, #cbd5f5 0%, #a5b4fc 60%, #818cf8 100%);
  transform: scale(0.7) translateX(0.2rem);
  opacity: 0;
  box-shadow: 0 0 10px rgba(129, 140, 248, 0.45);
}

.moon::before,
.moon::after {
  content: "";
  position: absolute;
  border-radius: 999px;
  background: rgba(148, 163, 226, 0.6);
}

.moon::before {
  width: 0.35rem;
  height: 0.35rem;
  top: 0.15rem;
  left: 0.18rem;
}

.moon::after {
  width: 0.25rem;
  height: 0.25rem;
  bottom: 0.16rem;
  right: 0.16rem;
  background: rgba(129, 140, 248, 0.5);
}

.toggle[data-mode="dark"] .sun {
  opacity: 0;
  transform: scale(0.5) translateX(-0.2rem);
}

.toggle[data-mode="dark"] .moon {
  opacity: 1;
  transform: scale(1) translateX(0);
}

.knob {
  position: absolute;
  top: 0.16rem;
  left: 0.18rem;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 999px;
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(226, 232, 240, 0.92));
  box-shadow: 0 4px 14px rgba(15, 23, 42, 0.15);
  display: grid;
  place-items: center;
  transition: transform 0.36s cubic-bezier(0.65, 0, 0.35, 1), background 0.4s ease, box-shadow 0.4s ease;
}

.knobCutout {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.15);
  transition: opacity 0.4s ease, background 0.4s ease;
}

.toggle[data-mode="dark"] .knob {
  transform: translateX(1.55rem);
  background: linear-gradient(145deg, rgba(79, 70, 229, 0.9), rgba(37, 99, 235, 0.88));
  box-shadow: 0 6px 18px rgba(59, 130, 246, 0.45);
}

.toggle[data-mode="dark"] .knobCutout {
  background: rgba(226, 232, 255, 0.8);
  opacity: 0.9;
}

@media (prefers-reduced-motion: reduce) {
  .toggle,
  .sun,
  .moon,
  .knob,
  .knobCutout {
    transition: none;
  }
}
